{"ast":null,"code":"var _jsxFileName = \"/home/phillip/Public/react-app/src/components/app/App.js\";\nimport React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'font-awesome/css/font-awesome.min.css';\nimport './App.css';\nimport Header from '../header/header';\nimport Footer from '../footer/footer';\nimport Content from '../content/content';\nimport auth from '../authentication/auth';\nimport * as actions from '../../reduxState/actions';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.newElement = tag => {\n      let newE;\n      let id = Math.random();\n\n      if (tag === 'none') {\n        return;\n      } else if (tag === 'video' || tag === 'img') {\n        newE = React.createElement(tag, {\n          id: id,\n          className: 'web-element',\n          onClick: this.addToStyling,\n          src: \"logo512.png\"\n        });\n      } else {\n        newE = React.createElement(tag, {\n          id: id,\n          className: 'web-element',\n          style: {\n            width: '100%'\n          },\n          onClick: this.addToStyling\n        }, 'New Element');\n      }\n      /*Each element will have its own hidden texarea hidden below it \n      and it will be wrapped around a div with className: new-element-wrapper*/\n\n\n      let newEWithEditBox = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"new-element-wrapper\",\n        id: 'wrapper:' + id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 9\n        }\n      }, newE), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: 'none',\n          width: '100%'\n        },\n        id: `edit-box:${id}`,\n        className: \"temporary-elements\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"textarea\", {\n        id: `text-area:${id}`,\n        className: \"web-text-area\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-primary btn-sm\",\n        onClick: e => this.saveNewText(id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }\n      }, \"Save\")), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"badge btn-outline-secondary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"fa fa-edit fa-lg temporary-elements\",\n        onClick: e => this.editText(id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"badge btn-outline-danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"fa fa-trash fa-lg temporary-elements\",\n        onClick: e => this.beforeElementDeletion(id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }\n      })));\n      actions.createWebElement(newEWithEditBox);\n      document.querySelector('#new_element').value = 'none';\n    };\n\n    this.beforeElementDeletion = id => {\n      //to avoid some bugs before deleting an element, we need to ensure that text-area is hidden\n      document.getElementById('text-area:' + id).style.display !== 'none' && this.saveNewText(id);\n      actions.deleteWebElement('wrapper:' + id);\n    };\n\n    this.addToStyling = e => {\n      document.getElementById('id').value = e.target.id;\n      Array.from(document.querySelectorAll('.new-element-wrapper')).map(element => {\n        if (element.id === `wrapper:${e.target.id}`) {\n          return element.style.background = 'rgba(154, 218, 218, 0.829)';\n        } else {\n          return element.style.background = 'white';\n        }\n      });\n    };\n\n    this.editText = e => {\n      document.getElementById('edit-box:' + e).style.display = 'block';\n      let elementToUpdate = document.getElementById(e);\n      document.getElementById(`text-area:${e}`).value = elementToUpdate.innerHTML;\n      elementToUpdate.style.display = 'none';\n    };\n\n    this.saveNewText = id => {\n      document.getElementById(id).style.display = 'block';\n      actions.updateWebElement({\n        id: 'wrapper:' + id,\n        text: document.getElementById('text-area:' + id).value\n      });\n      document.getElementById('edit-box:' + id).style.display = 'none';\n    };\n  }\n\n  componentDidMount() {\n    if (!localStorage.getItem('authorization')) this.props.history.push('/login');\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-container\",\n      id: \"main-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      onWebPreview: () => this.webPreview(),\n      onLogout: () => auth.logout(() => this.props.history.push('/')),\n      onNewElem: e => this.newElement(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/phillip/Public/react-app/src/components/app/App.js"],"names":["React","Component","Header","Footer","Content","auth","actions","App","newElement","tag","newE","id","Math","random","createElement","className","onClick","addToStyling","src","style","width","newEWithEditBox","display","e","saveNewText","editText","beforeElementDeletion","createWebElement","document","querySelector","value","getElementById","deleteWebElement","target","Array","from","querySelectorAll","map","element","background","elementToUpdate","innerHTML","updateWebElement","text","componentDidMount","localStorage","getItem","props","history","push","render","webPreview","logout"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'font-awesome/css/font-awesome.min.css';\nimport './App.css';\nimport Header from '../header/header';\nimport Footer from '../footer/footer';\nimport Content from '../content/content';\nimport auth from '../authentication/auth';\nimport * as actions from '../../reduxState/actions';\n\nclass App extends Component {\n\n  newElement = (tag) => {\n    let newE;\n    let id = Math.random();\n\n    if (tag === 'none') {\n      return;\n    }\n    else if (tag === 'video' || tag === 'img') {\n      newE = React.createElement(\n        tag,\n        {\n          id: id,\n          className: 'web-element',\n          onClick: this.addToStyling,\n          src: \"logo512.png\"\n        });\n    }\n    else {\n      newE = React.createElement(\n        tag,\n        {\n          id: id,\n          className: 'web-element',\n          style: { width: '100%' },\n          onClick: this.addToStyling\n        },\n        'New Element');\n    }\n\n    /*Each element will have its own hidden texarea hidden below it \n    and it will be wrapped around a div with className: new-element-wrapper*/\n    let newEWithEditBox =\n      <div className='new-element-wrapper' id={'wrapper:' + id}>\n        <div style={{ width: '100%' }}>{newE}</div>\n        <div style={{ display: 'none', width: '100%' }}\n          id={`edit-box:${id}`}\n          className='temporary-elements'>\n          <textarea id={`text-area:${id}`} className='web-text-area'></textarea>\n          <button className='btn btn-primary btn-sm'\n            onClick={(e) => this.saveNewText(id)}>Save\n          </button>\n        </div>\n        <button className='badge btn-outline-secondary'>\n          <span className='fa fa-edit fa-lg temporary-elements'\n            onClick={(e) => this.editText(id)}>\n          </span>\n        </button>\n        <button className='badge btn-outline-danger'>\n          <span className='fa fa-trash fa-lg temporary-elements'\n            onClick={(e) => this.beforeElementDeletion(id)}>\n          </span>\n        </button>\n      </div>;\n\n    actions.createWebElement(newEWithEditBox);\n\n    document.querySelector('#new_element').value = 'none';\n  }\n\n  beforeElementDeletion = (id) => {\n    //to avoid some bugs before deleting an element, we need to ensure that text-area is hidden\n    document.getElementById('text-area:' + id).style.display !== 'none' && this.saveNewText(id);\n    actions.deleteWebElement('wrapper:' + id);\n  }\n\n  addToStyling = (e) => {\n    document.getElementById('id').value = e.target.id;\n    Array.from(document.querySelectorAll('.new-element-wrapper')).map(element => {\n      if (element.id === `wrapper:${e.target.id}`) {\n        return element.style.background = 'rgba(154, 218, 218, 0.829)'\n      } else {\n        return element.style.background = 'white'\n      }\n    })\n\n  }\n\n  editText = (e) => {\n    document.getElementById('edit-box:' + e).style.display = 'block';\n    let elementToUpdate = document.getElementById(e);\n\n    document.getElementById(`text-area:${e}`).value = elementToUpdate.innerHTML;\n    elementToUpdate.style.display = 'none';\n  }\n  saveNewText = (id) => {\n    document.getElementById(id).style.display = 'block';\n    actions.updateWebElement({\n      id: 'wrapper:' + id,\n      text: document.getElementById('text-area:' + id).value\n    });\n    document.getElementById('edit-box:' + id).style.display = 'none';\n  }\n  componentDidMount() {\n    if (!(localStorage.getItem('authorization')))\n      this.props.history.push('/login')\n  }\n\n  render() {\n    return (\n      <div className='main-container' id='main-container'>\n        <Header\n          onWebPreview={() => this.webPreview()}\n          onLogout={() => auth.logout(() => this.props.history.push('/'))}\n          onNewElem={(e) => this.newElement(e.target.value)} />\n        <Content />\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}